#!/bin/bash
#
# auto docs crawler
#
# @author nanhapark
#

IN="
visionmedia/mocha;mocha;Readme.md
wycats/handlebars.js;handlebars;README.markdown
jaredhanson/passport-facebook;passport-facebook
jaredhanson/passport-twitter;passport-twitter
jaredhanson/passport-google-oauth;passport-google-oauth
felixge/node-formidable;formidable;Readme.md
flatiron/prompt;prompt
substack/node-findit;findit;README.markdown
"

for i in $IN
do
  read URL MODULENAME README <<<$(IFS=";"; echo $i)

  README=${README:-README.md}

  echo $URL,$MODULENAME,$README

  PREFIX="https://raw.github.com/"
  SUFFIX="/master/$README"
  curl -s -L $PREFIX$URL$SUFFIX -o docs/$MODULENAME.md

  cat > docs/$MODULENAME.meta.js << EOF
exports.name = '$MODULENAME';
exports.category = '';
exports.homepage = "https://github.com/$URL";
EOF
done
exit
